/* Reemplaza Tailwind v4 por v3 */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Tokens & Tema ===== */
:root {
  --bg: #0b1220;         /* dark base */
  --fg: #e5e7eb;         /* slate-200 */
  --muted: #94a3b8;      /* slate-400 */
  --card: rgba(255,255,255,.06);
  --card-border: rgba(255,255,255,.10);
  --accent-from: 168 85 247;  /* violet-500 */
  --accent-mid: 59 130 246;   /* blue-500 */
  --accent-to: 34 211 238;    /* cyan-400 */
  --ring: 32 100% 67%;

  /* caption chip (dark theme by default) */
  --caption-bg: rgba(0,0,0,.55);
  --caption-fg: #fff;
  --caption-border: rgba(255,255,255,.22);
}

html.theme-light {
  --bg: #f8fafc;         /* slate-50 */
  --fg: #0f172a;         /* slate-900 */
  --muted: #475569;      /* slate-600 */
  --card: rgba(0,0,0,.03);
  --card-border: rgba(0,0,0,.08);

  /* caption chip (light theme) */
  --caption-bg: rgba(255,255,255,.72);
  --caption-fg: #0f172a;
  --caption-border: rgba(0,0,0,.15);
}

html, body { height: 100%; }
html { scroll-behavior: smooth; }
body {
  min-height: 100%;
  background-color: var(--bg);
  color: var(--fg);
  -webkit-font-smoothing: antialiased;
  background-image:
    radial-gradient(1200px 600px at 10% -10%, rgba(99,102,241,.15), transparent 60%),
    radial-gradient(1000px 500px at 110% 0%, rgba(34,211,238,.12), transparent 60%);
}

/* ===== Animations ===== */
@keyframes shimmer { 0%{background-position:0 50%} 100%{background-position:200% 50%} }
@keyframes reveal-up { from {opacity:0; transform:translateY(12px)} to {opacity:1; transform:none} }

/* ===== Utilidades reusables ===== */
@layer components {
  .container-narrow { @apply max-w-7xl mx-auto px-4 md:px-8; }

  .brand-gradient {
    background-image: linear-gradient(90deg,
      rgb(var(--accent-from)) 0%,
      rgb(var(--accent-mid)) 50%,
      rgb(var(--accent-to)) 100%);
    @apply text-transparent bg-clip-text;
  }

  .grid-dots {
    background-image: radial-gradient(color-mix(in oklab, var(--muted) 30%, transparent) 1px, transparent 1px);
    background-size: 10px 10px;
    background-position: -1px -1px;
  }

  .pill { @apply text-xs font-medium px-2.5 py-1 rounded-full border; border-color: var(--card-border); background: color-mix(in oklab, var(--fg) 6%, transparent); }

  .gradient-border {
    position: relative; border-radius: 1.5rem;
    /* thicker border + glow */
    padding: 3px;
    background:
      linear-gradient(135deg,
        rgba(var(--accent-from), .85),
        rgba(var(--accent-mid), .85),
        rgba(var(--accent-to), .85));
    box-shadow:
      0 1px 0 rgba(255,255,255,.06) inset,
      0 10px 40px -12px rgba(0,0,0,.55),
      0 0 0 2px rgba(34,211,238,.08); /* soft cyan ring like the ref */
  }
  .gradient-border .inner {
    border-radius: 1.45rem;
    background: color-mix(in oklab, var(--bg) 85%, transparent);
    backdrop-filter: blur(4px);
  }

  .card { border-radius: 1rem; border: 1px solid var(--card-border); background: var(--card); transition: transform .25s ease, background-color .25s ease; }
  .card:hover { transform: translateY(-2px); background: color-mix(in oklab, var(--card) 80%, white 4%); }

  .btn { @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 transition; border: 1px solid var(--card-border); background: color-mix(in oklab, var(--fg) 7%, transparent); }
  .btn-primary { color: white; background-image: linear-gradient(90deg, rgb(var(--accent-from)), rgb(var(--accent-mid)), rgb(var(--accent-to))); background-size: 200% 100%; animation: shimmer 2.5s linear infinite paused; border: none; }
  .btn-primary:hover { animation-play-state: running; }

  .muted { color: var(--muted); }

  /* Dotted overlay that plays well with gradient-border */
  .with-dots { position: relative; }
  .with-dots::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background-image: radial-gradient(color-mix(in oklab, var(--muted) 26%, transparent) 1px, transparent 1px);
    background-size: 10px 10px;
    background-position: -1px -1px;
    opacity: .6; /* ajusta intensidad del patrón */
  }

  /* Icon button: square, centered icon with hover contrast */
  .btn-icon { @apply inline-flex items-center justify-center rounded-xl; width: 40px; height: 40px; padding: 0; color: var(--fg); background: color-mix(in oklab, var(--fg) 6%, transparent); transition: color .2s ease, background-color .2s ease, border-color .2s ease; }
  .btn-icon:hover, .btn-icon:focus-visible { color: var(--bg); background: var(--fg); border-color: color-mix(in oklab, var(--fg) 60%, transparent); }

  /* Simple tooltip driven by data-tip */
  .has-tooltip { position: relative; }
  .has-tooltip::after {
    content: attr(data-tip);
    position: absolute; left: 50%; bottom: calc(100% + 8px);
    transform: translateX(-50%) translateY(4px);
    background: rgba(17,24,39,.9);
    color: #fff; font-size: 12px; line-height: 1; white-space: nowrap;
    padding: 6px 8px; border-radius: 8px;
    opacity: 0; pointer-events: none; transition: opacity .18s ease, transform .18s ease;
    border: 1px solid rgba(255,255,255,.2);
  }
  .has-tooltip:hover::after, .has-tooltip:focus-visible::after { opacity: 1; transform: translateX(-50%) translateY(0); }

  .avatar-btn { width: 40px; height: 40px; border-radius: 9999px; overflow: hidden; border: 1px solid var(--card-border); background: color-mix(in oklab, var(--fg) 6%, transparent); flex: 0 0 auto; }
  .avatar-img { width: 100%; height: 100%; object-fit: cover; display: block; }

  /* Theme-aware caption chip for project title/description */
  .case-caption {
    display: inline-block;
    background: var(--caption-bg);
    color: var(--caption-fg);
    border: 1px solid var(--caption-border);
    border-radius: 0.75rem;
    padding: 10px 12px;
    backdrop-filter: blur(8px);
  }
  .case-caption h3,
  .case-caption p { color: var(--caption-fg); }

  /* Action chip: same visual as caption, for links/buttons */
  .case-action {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    background: var(--caption-bg);
    color: var(--caption-fg);
    border: 1px solid var(--caption-border);
    border-radius: 0.75rem;
    padding: 10px 12px;
    backdrop-filter: blur(8px);
    transition: background-color .18s ease, border-color .18s ease, transform .18s ease;
  }
  .case-action:hover,
  .case-action:focus-visible {
    background: color-mix(in oklab, var(--caption-bg) 75%, white 15%);
    border-color: color-mix(in oklab, var(--caption-border) 70%, white 20%);
    transform: translateY(-1px);
  }
}

/* Estilo de scrollbar para áreas con overflow (columna de proyectos) */
#projects-scroll {
  scrollbar-width: thin;
  scrollbar-color: rgba(148,163,184,.5) transparent;
}
#projects-scroll::-webkit-scrollbar { width: 10px; height: 10px; }
#projects-scroll::-webkit-scrollbar-thumb {
  background: rgba(148,163,184,.35);
  border-radius: 9999px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
#projects-scroll::-webkit-scrollbar-track { background: transparent; }

/* ===== Lightbox basado en <dialog> ===== */
dialog.lightbox { width:100vw; height:100vh; padding:0; border:none; background:rgba(0,0,0,.85); color:#fff; }
dialog.lightbox::backdrop { background: rgba(0,0,0,.55); }
.lightbox__img { max-width:92vw; max-height:90vh; object-fit:contain; display:block; margin:5vh auto 0; border-radius:1rem; box-shadow:0 20px 60px rgba(0,0,0,.6); }
/* make the close button readable in both themes */
.lightbox__close { position:fixed; top:16px; right:16px; color:#fff; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.25); }
.lightbox__caption {
  position: fixed; left: 50%; bottom: 16px; transform: translateX(-50%);
  max-width: 92vw; text-align: center; font-size: 14px;
  padding: 8px 12px; border-radius: 12px;
  color: #fff; background: rgba(0,0,0,.45); backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.2);
}

/* Accesibilidad */
:focus-visible { outline: 2px solid hsl(var(--ring)); outline-offset: 3px; }
@media (prefers-reduced-motion: reduce) { * { animation: none !important; transition: none !important; } }
